<!DOCTYPE html>
<html class="no-js  page-114 app-JLIKTU" lang="en">

<head>
  <div id="preloader"></div>
  <style>
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      z-index: 9999;
      overflow: hidden;
      background: #12121261;
      /*width: 57%;*/
      border-radius: 13px 35px;
    }

    #preloader:before {
      content: "";
      position: fixed;
      top: calc(50% - 30px);
      left: calc(53% - 30px);
      border: 6px solid #f92020b8;
      border-top-color: #e2eefd;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      -webkit-animation: animate-preloader 1s linear infinite;
      animation: animate-preloader 1s linear infinite;
      z-index: 9999;
    }

    @-webkit-keyframes animate-preloader {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes animate-preloader {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta charset="utf-8">
  <title>Approved Bull report</title>
  <link rel="stylesheet" href="../assets/css/oj-redwood-notag-min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/Coreone.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/aos.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css" />
  <link rel="apple-touch-icon" href="../assets/img/app-icon-192.png" />
  <link rel="icon" href="../assets/img/app-icon-32.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="-1" />
  <meta http-equiv="Cache-Control" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th,
    td {
      border: 1px solid hsl(0, 3%, 70%);
      padding: 8px;
      text-align: center;
    }

    th {
      background-color: #f2f2f2;
    }

    td {
      background-color: #fff;
    }

    .action-column {
      width: 150px;
    }
  </style>
</head>

<body
  class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions no-anim t-PageTemplate--standard   apex-top-nav apex-icons-fontapex apex-theme-vita-copy-1"
  id="t_PageBody" onload="loadPopup()">
  <!-- <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a> -->
  <input type="hidden" name="p_flow_id" value="110" id="pFlowId" /><input type="hidden" name="p_flow_step_id" value="70"
    id="pFlowStepId" /><input type="hidden" name="p_instance" value="2224570108753" id="pInstance" /><input
    type="hidden" name="p_page_submission_id" value="270490329034844655939273636227247880316"
    id="pPageSubmissionId" /><input type="hidden" name="p_request" value="" id="pRequest" /><input type="hidden"
    name="p_reload_on_submit" value="S" id="pReloadOnSubmit" /><input type="hidden"
    value="jliktu&#x2F;70&#x2F;2224570108753" id="pContext" /><input type="hidden"
    value="270490329034844655939273636227247880316" id="pSalt" />
  <header class="t-Header" id="t_Header" role="banner">
    <div class="t-Header-branding">
      <div class="t-Header-controls">
        <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree" aria-label="Main Navigation"
          title="Main Navigation" id="t_Button_navControl" type="button"><span class="t-Header-controlsIcon"
            aria-hidden="true"></span></button>
      </div>
      <div class="t-Header-logo">
        <!-- <a href="&#x2F;ords&#x2F;r&#x2F;wsjallikattu&#x2F;jliktu&#x2F;home?session=2224570108753" class="t-Header-logo-link"><span class="apex-logo-text">Jallikattu</span></a> -->
        <div class="gigw">
          <li><a data-aos="fade-up" data-aos-delay="200" class="linkedin btn-decrease"><span class="d-inline-block"
                tabindex="0" data-toggle="tooltip" title="font size Decrease"><i></i> A -</a></li>
          <li><a data-aos="fade-up" data-aos-delay="300" class="linkedin btn-orig"><span class="d-inline-block"
                tabindex="0" data-toggle="tooltip" title="Reset font"><i></i> A <sup></sup></a></li>
          <li><a data-aos="fade-up" data-aos-delay="400" class="instagram btn-increase"><span class="d-inline-block"
                tabindex="0" data-toggle="tooltip" title="font size Increase"><i></i> A +</a></li>
          <li><a data-aos="fade-up" data-aos-delay="500"><span class="d-inline-block" tabindex="0" data-toggle="tooltip"
                title="Dark Mode"><i class="t-Icon fa fa-moon-o" id="darkmode"></i></a></li>
          <li><a data-aos="fade-up" data-aos-delay="600" class="form-check form-switch"><label class="form-check-label"
                for="screenReaderSwitch">
                <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Screen Reader">
                  <i id="sound" class="t-Icon fa fa-volume-up"></i></label><input class="form-check-input"
                type="checkbox" role="switch" id="screenReaderSwitch"
                onclick="readText(document.getElementsByTagName('body')[0])" /></span></a>
          </li>
        </div>
      </div>
      <div class="t-Header-navBar">
        <div class="t-Header-navBar--start"></div>
        <div class="t-Header-navBar--center">
          <ul class="t-NavigationBar " id="70091113641892546086">
            <li class="t-NavigationBar-item ">
              <button class="t-Button t-Button--icon t-Button t-Button--header t-Button--navBar" type="button"
                id="L70091125771514546098" data-menu="menu_L70091125771514546098" title="">
                <span class="t-Icon fa&#x20;fa-user" aria-hidden="true"></span><span
                  class="t-Button-label">User</span><span class="t-Button-badge"></span><span
                  class="a-Icon icon-down-arrow" aria-hidden="true"></span>
              </button>
              <div class="t-NavigationBar-menu" style="display: none" id="menu_L70091125771514546098">
                <ul>
                  <li class="" data-current="false" data-icon=""><a href="separator" title="" target="">---</a></li>
                  <!-- <li class="" data-current="false" data-icon="fa&#x20;fa-lock-password"><a
                      href="javascript:apex.theme42.dialog('\u002Fords\u002Fr\u002Fwsjallikattu\u002Fjliktu\u002Fchange-password?session=2224570108753\u0026dialogCs=nsVVlFac0rvWEd675chF55E_wHVd_xyFq-Met-adIgEcSqFVUVdXXL_7CNsdg1_lhuWkC4Y0O6S1MOvY-TKKSw',{title:'Change Password',h:'auto',w:'720',mxw:'960',modal:true,dialog:null,dlgCls:'t-Dialog-page--standard '+''},'',apex.gPageContext$)"
                      title="" target="">Change Password</a></li> -->
                  <li class="" data-current="false" data-icon="fa&#x20;fa-lock-password"><a href="javascript:void();"
                      title="" target="">Change Password</a></li>
                  <li class="" data-current="false" data-icon="fa fa-sign-out">
                    <a href="#" id="globalSignOutBtn" title="Sign Out">Sign Out</a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <div class="t-Header-navBar--end"></div>
      </div>
    </div>
    <div class="top">
      <!-- <img id="leftlogo" data-aos="fade-right" data-aos-duration="800" src="r/wsjallikattu/110/files/static/v1667/TN_logo.png"> -->
      <h2 data-aos="zoom-in" data-aos-duration="800" class="dept-name text-middle">DIRECTORATE OF ANIMAL HUSBANDRY AND
        VETERINARY SERVICES</h2>
      <h3 data-aos="zoom-in" data-aos-duration="800" class="dept-name2 text-middle">JALLIKATTU IN TAMIL NADU</h3>
      <!-- <img id="rightlogo" data-aos="fade-left" data-aos-duration="800" src="r/wsjallikattu/110/files/static/v1667/right.png"> -->
    </div>
    <div class="t-Header-nav">
      <div class="t-Header-nav-list js-tabLike js-tabLike" id="t_MenuNav">
        <ul>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="index.html" title="" target="">Home</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="pending-applications.html" title="" target="">Pending
              Applications</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="need-more-information.html" title="" target="">Need More
              Information&#x2F;Rejected Applications</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="district-monitoring-report.html" title="" target="">District
              Monitoring
              Reports</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="go-issued.html" title="" target="">GO Issued</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="final-inspection-report.html" title="" target="">Final&#x2F;Pre-Event
              Inspection Reports</a></li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="event-completion-form.html" title="" target="">Event Completion Form</a>
          </li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="all-application-status.html" title="" target="">All Application Status</a>
          </li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="" title="" target="">All Reports</a>
            <ul style="display: none">
              <li data-id="" data-disabled="" data-hide="" data-shortcut=""
                data-icon="fa&#x20;fa-arrow-circle-o-right&#x20;fa-anim-flash"><a
                  href="post-event-inspection-report.html" title="" target="">Post Event Reports</a></li>
              <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a href="bull-report.html"
                  title="" target="">Registration of Bulls Report</a></li>
              <li data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
                  href="participant-report.html" title="" target="">Registration of participants report</a></li>
            </ul>
          </li>
          <li class="a-MenuBar-item a-Menu--current" data-current="true" data-id="" data-disabled="" data-hide=""
            data-shortcut="" data-icon=""><a class="a-MenuBar-label" href="approved-bull-report.html" title=""
              target="">Approved Bull
              report</a>
          </li>
          <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon=""><a
              class="a-MenuBar-label" href="approved-participant-report.html" title="" target="">Approved Participant
              Report</a></li>
        </ul>
      </div>
    </div>
  </header>
  <div class="t-Body">
    <div class="t-Body-main">
      <div class="t-Body-title" id="t_Body_title"></div>
      <div class="t-Body-content" id="t_Body_content">
        <main id="main" class="t-Body-mainContent">
          <span id="APEX_SUCCESS_MESSAGE" data-template-id="76689956809586187806_S"
            class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE"
            data-template-id="76689956809586187806_E" class="apex-page-error u-hidden"></span>
          <div class="t-Body-fullContent"></div>
          <div class="t-Body-contentInner">
            <div class="container">

              <div class="row">
                <div class="col col-12 apex-col-auto col-start col-end">
                  <div
                    class="t-Form-fieldContainer rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--select-list"
                    id="P114_PARTICIPANT_CONTAINER">
                    <div class="t-Form-labelContainer col col-2">
                      <label for="P114_PARTICIPANT" id="P114_PARTICIPANT_LABEL" class="t-Form-label">Search Participant
                        ID:</label>
                    </div>
                    <div class="t-Form-inputContainer col col-10">
                      <div class="t-Form-itemWrapper">
                        <select id="P114_PARTICIPANT" name="P114_PARTICIPANT" class="selectlist apex-item-select"
                          size="1">
                          <option value="" selected="selected">--Select Participant ID--</option>
                        </select>
                      </div>
                      <span id="P114_PARTICIPANT_error_placeholder" class="a-Form-error"></span>
                    </div>
                  </div>
                  <div style="float: inline-end">
                    <button id="approveButton" class="t-Button t-Button--large t-Button--success t-Button--padBottom "
                      type="button" id="B3295277329763110"><span class="t-Button-label">Came for Event</span></button>
                  </div>
                </div>
              </div>

              <div id="participantDetails" class="row" style="margin-top: 20px; display: none;">
                <div class="col col-12">
                  <table id="participantDetailsTable" class="table table-striped table-bordered">
                    <thead>
                      <tr>
                        <th>Participant ID</th>
                        <th>Event Type</th>
                        <th>Event Date</th>
                        <th>Place of Event</th>
                        <th>District</th>
                        <th>Mobile Number</th>
                        <th>Status</th>

                      </tr>
                    </thead>
                    <tbody id="participantDetailsBody"></tbody>
                  </table>
                </div>
              </div>
        </main>
        <footer class="t-Footer" id="t_Footer" role="contentinfo">
          <div class="t-Footer-body">
            <div class="t-Footer-content"></div>
            <div class="t-Footer-apex">
              <!-- <div class="t-Footer-version">Release 1.0</div>
                    <div class="t-Footer-customize"></div>
                     -->
              <div class="row">
                <div class="col-6">
                  <p class="text-center"><img class="footer-logo" src="../assets/img/right.png"><br>Content owned by
                    Department of Animal Husbandry and Veterinary Services</p>
                </div>
                <div class="col-6">
                  <p class="text-center"><img class="footer-logo" src="../assets/img/tnegalogo.png"><br>Designed and
                    Developed by Tamil Nadu e-Governance Agency</p>
                </div>
              </div>
            </div>
          </div>
          <div class="t-Footer-top">
            <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page"
              aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
          </div>
        </footer>
      </div>
    </div>
  </div>
  <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>
  <input type="hidden" id="pPageFormRegionChecksums" value="&#x5B;&#x5D;">
  <input type="hidden" id="pPageItemsRowVersion" value="" /><input type="hidden" id="pPageItemsProtected"
    value="&#x2F;aUt2C5CNMQz4gnfHtz7FWpaqYuN96tjDqpIv0htQRUzlD04GCmtGd97JUQFads_CKGaVu-ugcwuL4cCKB39dBQ" />
  </form>
  <script>
    var apex_img_dir = "\u002Fi\u002F";
    var apex = {
      env: { APP_USER: "9677447050", APP_ID: "110", APP_PAGE_ID: "114", APP_SESSION: "2224570108753", APP_FILES: "r\u002Fwsjallikattu\u002F110\u002Ffiles\u002Fstatic\u002Fv1667\u002F", WORKSPACE_FILES: "r\u002Fwsjallikattu\u002Ffiles\u002Fstatic\u002Fv1\u002F", APEX_VERSION: "23.2.1", APEX_BASE_VERSION: "23.2" },
      libVersions: { ckeditor5: "36.0.0", cropperJs: "1.5.13", domPurify: "3.0.5", fullcalendar: "6.1.8", hammer: "2.0.8", jquery: "3.6.4", jqueryUi: "1.13.2", maplibre: "2.4.0", markedJs: "5.1.2", prismJs: "1.29.0", oraclejet: "15.0.7", tinymce: "6.7.1", turndown: "7.1.1", monacoEditor: "0.32.1", lessJs: "4.1.3" }
    };
  </script>
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script src="../assets/js/globalLogout.js"></script>
  <script src="../assets/js/desktop_all.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/aos.js"></script>
  <script src="../assets/js/add.min.js"></script>
  <script type="text/javascript" src="../assets/js/aos.js"></script>
  <script src="../assets/vendor/jquery/jquery.min.js"></script>
  <!-- Include DataTables and Buttons JS -->
  <script src="../assets/vendor/datatable/jquery.dataTables.min.js"></script>
  <script src="../assets/vendor/datatable/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/dataTables.buttons.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/jszip.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/pdfmake.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/vfs_fonts.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/buttons.html5.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/buttons.print.min.js"></script>
  <script src="../assets/vendor/datatables-buttons/js/buttons.colVis.min.js"></script>
  <script src="../assets/js/widget.apexTabs.min.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/require.js"></script>
  <script src="../assets/js/requirejs.jetConfig.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>
  <script src="../apiConfig.js"></script>
  <script type="text/javascript">
    apex.session.initTimeouts(900, { "idle_time_ms": 1187000, "life_time_ms": 27997000, "max_idle_time_ms": 1200000 }, '\u002Fords\u002Fr\u002Fwsjallikattu\u002Fjliktu\u002Fhome', '\u002Fords\u002Fr\u002Fwsjallikattu\u002Fjliktu\u002Fhome');
    apex.jQuery(function () {
      apex.page.init(this, function () {
        try {
          (function () {
            var e = apex.jQuery("#t_MenuNav", apex.gPageContext$);
            if (e.hasClass("js-addActions")) {
              apex.actions.addFromMarkup(e);
            }
            e.menu({
              behaveLikeTabs: e.hasClass("js-tabLike"),
              menubarShowSubMenuIcon: e.hasClass("js-showSubMenuIcons") || null,
              menubar: true,
              menubarOverflow: true,
              callout: e.hasClass("js-menu-callout")
            });
          })();
          (function () { apex.widget.selectList("#P70_DISTRICT", { "nullValue": "", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-ODI0NTI0MjcyMTQxNjc0MzAxMw\u002F9uqGSE5rB-QCWPIqhVt7_BMxH--Wgjr_js-1tnJiu5be3sG-Abua4ZcGr0_Ya8KrHEC9Lbf9SrQQEL3CZBCsXQ" }); })();
          (function () { apex.widget.selectList("#P70_TALUK", { "nullValue": "", "dependingOnSelector": "#P70_DISTRICT", "optimizeRefresh": true, "pageItemsToSubmit": "#P70_DISTRICT", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-ODI0NTI0MjgwMjYzMDc0MzAxNA\u002FMXViLS33nKlrnFzdKPeOS2vObqCONqOa8hBb4BiEO6QNlWj0ujjp7TmKSGdXJkyUvTr_ve0m8AkOLltUBF4uQg" }); })();
          (function () { apex.widget.selectList("#P70_EVENT_PLACE", { "nullValue": "", "dependingOnSelector": "#P70_DISTRICT,#P70_TALUK", "optimizeRefresh": true, "pageItemsToSubmit": "#P70_DISTRICT,#P70_TALUK", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-ODI0NTI0Mjk3Njc2Mzc0MzAxNQ\u002Fs_JsBh0q4YYXerGuuKnxBEiug14uXQx5MteUbgtSlDKloVR1YiZ16Xtssr4tFl2_znutc3XrYODxr6a6-kA_Xw" }); })();
          (function () { apex.widget.selectList("#P70_EVENT_ID", { "nullValue": "", "dependingOnSelector": "#P70_DISTRICT,#P70_TALUK", "optimizeRefresh": true, "pageItemsToSubmit": "#P70_DISTRICT,#P70_TALUK", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-ODI0NTI0MjYzNjc3NTc0MzAxMg\u002FireqItMBIQFVsTrJkroLwLPcDEVsBcK9GiU6ZVpHdxGidWx2sEgI5mES5P8X6BOfW_o9SB5ZoTkQHgwgx13HLg" }); })();
          (function () { apex.widget.selectList("#P70_TYPE_OF_EVENT", { "nullValue": "", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-ODI0NTI0MzQ3NjY5OTc0MzAyMA\u002FUgL1UM8mgWmHHkzG_2Z8jZAYYZkkTBzoLEcaXdj2xWIY_NKjY1broKu9dQcdFwhU8e1p9_YMsI1NaBrywDupfA" }); })();
        } catch (e) { apex.debug.error(e) };
        apex.item.waitForDelayLoadItems().done(function () {
          try {
            apex.theme42.initializePage.noSideCol();

            apex.page.warnOnUnsavedChanges();
          } finally {
            apex.event.trigger(apex.gPageContext$, 'apexreadyend');
          };
        });
      });
    }); apex.pwa.init({ serviceWorkerPath: '\u002Fords\u002Fr\u002Fwsjallikattu\u002Fjliktu\u002Fsw.js?v=23.2.1-460263366\u0026lang=en' });
  </script>
  <script>
    $(document).on({
      ajaxStart: function () {
        $('#preloader').show();
        $("body").addClass("user_loading");
      },
      ajaxStop: function () {
        $('#preloader').hide();
        $("body").removeClass("user_loading");
      }
    });

    $('#preloader').hide();
    AOS.init();
    let encryptedDataFromStorage = localStorage.getItem('userDetails');
    let decryptedData;
    if (encryptedDataFromStorage) {
      const secretKey = 'V7gN4dY8pT2xB3kRz';
      // Decrypt the data: decrypt the string and convert it to UTF-8
      const bytes = CryptoJS.AES.decrypt(encryptedDataFromStorage, secretKey);
      decryptedData = bytes.toString(CryptoJS.enc.Utf8);
    } else {
      console.log('No data found in localStorage');
    }
    let userDetails = decryptedData;
    let userId = '';
    // Find the element where the name should be displayed
    var userNameElement = document.querySelector('.t-Button-label');
    // If user is logged in (i.e., user details exist in localStorage)
    if (userDetails) {
      // Parse user details
      const user = JSON.parse(userDetails);
      // Update the username in the profile button (if available)
      if (user && user.name) {
        userId = user.user_id;
        userNameElement.textContent = user.name; // or userNameElement.innerText
      }
    } else {
      showErrorToast("Something went wrong");

      sessionStorage.clear();
      setTimeout(function () {
        window.location.href = "../index.html";
      }, 1000);
    }
    function showSuccessToast(message) {
      const toastElement = document.getElementById('successToast');
      const toastBody = document.getElementById('successMessage');

      toastBody.textContent = message;
      const toast = new bootstrap.Toast(toastElement, {
        autohide: true,
        delay: 3000
      });
      toast.show();
    }
    function showErrorToast(message) {
      const toastElement = document.getElementById('errorToast');
      const toastBody = document.getElementById('errorMessage');
      toastBody.textContent = message;
      const toast = new bootstrap.Toast(toastElement, {
        autohide: true,
        delay: 3000
      });
      toast.show();
    }
    function downloadExcel() {
      const table = $('#submittedApplicationsTable').DataTable();

      // If no data in table
      if (table.rows().count() === 0) {
        alert("No data available to download.");
        return;
      }

      // Create a new workbook
      const wb = XLSX.utils.book_new();

      // Get all rows (not just visible ones) using DataTable API
      const rows = table.rows().data(); // Get data for all rows

      // Convert table data into a 2D array (for XLSX)
      const dataRows = [];
      rows.each(function (rowData) {
        const row = [];
        rowData.forEach(function (cellData) {
          // Check if the cell contains an anchor tag
          if (typeof cellData === 'string' && cellData.includes('<a') || typeof cellData === 'string' && cellData.includes('<span')) {
            row.push('-'); // Exclude the data inside anchor tags (set to empty string)
          } else {
            row.push(cellData); // Include the data if it's not inside anchor tags
          }
        });
        dataRows.push(row);
      });

      // Add the static header (you can create this based on your table headers)
      const headers = [
        'Actions', 'Event ID', 'Event Date', 'Event Type', 'Place of Event',
        'Name of Organizing Committee', 'Committee Register Number',
        'President Name', 'President Contact', 'President Mobile Number',
        'Name of Village', 'Name of Taluk', 'Name of District', 'Pincode',
        'Request Letter', 'Insurance Copy', 'Assurance Bond',
        'Panchayat Union', 'Layout Sketch', 'Other Documents', 'Previous Event',
        'Previous Year FIR', 'Joint Committee Report', 'G.O', 'Upload Photo', 'Request Status',
      ];

      dataRows.unshift(headers);  // Prepend headers to the data

      // Create the worksheet from the data rows
      const ws = XLSX.utils.aoa_to_sheet(dataRows);

      // Add the worksheet to the workbook
      XLSX.utils.book_append_sheet(wb, ws, "Sheet1");

      // Download the Excel file with the name 'need_more_information_report.xlsx'
      XLSX.writeFile(wb, "pre_event_inspection.xlsx");
    }
    function processFile(selector) {
      return new Promise((resolve, reject) => {
        var fileInput = $(selector)[0];
        var file = fileInput.files[0];

        if (file) {
          const reader = new FileReader();
          const fileData = {};

          reader.onload = function (event) {
            // File processed as Base64 string
            fileData.fileBase64 = event.target.result.split(',')[1];
            fileData.mimetype = file.type;
            fileData.filename = file.name;

            resolve(fileData); // Resolve the promise with fileData
          };

          reader.onerror = function (error) {
            reject(error); // Reject the promise in case of error
          };

          reader.readAsDataURL(file); // Read the file as a data URL (Base64)
        }
      });
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {


      const apiUrl = `${getApiUrl("mhsApprovedParticipantReport")}?user_id=${userId}`;
      // Fetch participant data on page load
      $.ajax({
        url: apiUrl,
        method: "GET",
        headers: {
          "X-APP-KEY": "j6ll!k@ttu",
          "X-APP-NAME": "tn jallikattu"
        },
        success: function (response) {
          if (response.success === 1 && response.data.length > 0) {
            const participantSelect = $("#P114_PARTICIPANT");
            const participantBody = $("#participantDetailsBody");

            // Populate dropdown and table
            response.data.forEach((participant) => {
              participantSelect.append(
                `<option value="${participant.part_id}">${participant.part_id}</option>`
              );

              participantBody.append(`
                <tr data-part-id="${participant.part_id}">
                    data-mobile="${participant.mobile}"
                  data-status="${participant.status}"
                  data-event="${participant.event_date}">
                  <td>${participant.part_id}</td>
                  <td>${participant.event_type}</td>
                  <td>${participant.place_of_event}</td>
                  <td>${participant.district}</td>
                
                </tr>
              `);
            });

            $("#participantDetails").show();
          } else {
            showErrorToast("No data found.");
          }
        },
        error: function () {
          showErrorToast("Error fetching data. Please try again.");
        },
      });

      // Handle participant ID selection
      $("#P114_PARTICIPANT").on("change", function () {
        const selectedParticipantId = $(this).val();

        if (selectedParticipantId) {
          $("#participantDetailsBody tr").hide(); // Hide all rows
          $(`#participantDetailsBody tr[data-part-id="${selectedParticipantId}"]`).show(); // Show selected row
        } else {
          $("#participantDetailsBody tr").show(); // Show all rows if no participant selected
        }
      });
    });

    // Handle approve button click
    $("#approveButton").on("click", function () {
      // Fetch mobile numbers from data attributes
      const mobiles = [];
      $("#participantDetailsBody tr").each(function () {
        const mobile = $(this).data("mobile");
        if (mobile) mobiles.push(mobile);
      });

      if (mobiles.length === 0) {
        alert("No participants found for approval.");
        return;
      }

      // Send POST request
      $.ajax({
        // url: "https://tngis.tnega.org/lcap_api/jallikattu/v1/mhs_user/mhs_approved",
        url: getApiUrl("mhsApproved"),
        method: "POST",
        headers: {
          "X-APP-KEY": "j6ll!k@ttu",
          "X-APP-NAME": "tn jallikattu"
        },
        contentType: "application/json", // Specify raw JSON
        data: JSON.stringify({ mobile_no: mobiles }), // Convert data to JSON string
        success: function (response) {
          showSuccessToast("Approval successful!");
          console.log("API Response: ", response);
        },
        error: function (xhr, status, error) {
          console.error("Error approving participants: ", error);
          showErrorToast("Failed to approve participants.");
        }
      });
    });

  </script>
  <script src="../assets/js/changePassword.js"></script>
  <link rel="stylesheet" href="../assets/css/popUp.css" type="text/css" />

</body>

</html>